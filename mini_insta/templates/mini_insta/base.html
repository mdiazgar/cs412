<!-- File: base.html 
   Author: María Díaz Garrido
   Description: Base layout for the mini_insta app.
-->
{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Mini Insta{% endblock %}</title>

    <link rel="stylesheet" href="{% static 'styles_mini_insta.css' %}">

    <style>
      /* existing */
      body { font-family: system-ui, Arial, sans-serif; margin: 2rem; }
      nav a { margin-right: 1rem; }
      img { max-width: 100%; height: auto; border-radius: 8px; }
      .quote { font-size: 1.5rem; margin: 1rem 0; }
      .grid { display: grid; gap: 1rem; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); }
      .muted { color: #666; }

      /* ---- Mini design system (buttons, avatar, layout helpers) ---- */
      :root { --purple:#ec4899; --purple-600:#db2777; --gray:#6b7280; }

      /* Avatar */
      .avatar{width:96px;height:96px;border-radius:9999px;object-fit:cover;
              border:3px solid var(--purple);display:block}
      .avatar-sm{width:56px;height:56px;border-width:2px}

      /* Base button FIRST */
      a.btn, button.btn, input[type="submit"].btn {
        display: inline-block;
        font: inherit;
        padding: 0.55rem 1.2rem;
        border-radius: 0.5rem;
        border: 1.8px solid transparent;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.2s ease;
        cursor: pointer;
        background: none;
        -webkit-appearance: none;
        appearance: none;
      }

      /* Variants */
      .btn.btn-primary {
        background: var(--purple);
        color: #fff;
        border-color: var(--purple);
        box-shadow: 0 2px 6px rgba(236,72,153,.25);
      }
      .btn.btn-primary:hover {
        background: var(--purple-600);
        border-color: var(--purple-600);
        box-shadow: 0 3px 10px rgba(236,72,153,.35);
      }

      .btn.btn-outline {
        background: transparent;
        color: var(--purple);
        border-color: var(--purple);
      }
      .btn.btn-outline:hover {
        background: var(--purple);
        color: #fff;
        border-color: var(--purple);
        box-shadow: 0 2px 6px rgba(236,72,153,.25);
      }

      /* Layout helpers */
      .row{display:flex;align-items:center;gap:1rem}
      .gap-sm{gap:.5rem}
      .stack-sm > *{margin-bottom:.5rem}
      .card{padding:1rem;border-radius:1rem;border:1px solid #e5e7eb}
      .stat{padding:.75rem 1rem;border:2px solid var(--purple);border-radius:.75rem;text-align:center}
      .stat .val{font-weight:700}
      img.rounded{border-radius:12px}

      /* Sticky bottom nav */
      .bottom-nav {
        position: sticky;
        bottom: 0;
        display: flex;
        gap: 1rem;
        align-items: center;
        justify-content: space-between;
        padding: .6rem 1rem;
        background: #fff;
        border-top: 1px solid #eee;
        z-index: 10;
      }
      .nav-left, .nav-right { display:flex; gap:1rem; align-items:center; }
      .bottom-nav a { text-decoration: none; font-size: 1.05rem; }
    </style>
  </head>
  <body>

    <nav class="bottom-nav">
      <div class="nav-left">
        <a href="{% url 'mini_insta:show_all_profiles' %}">Home</a>

        {% if request.user.is_authenticated %}
          <!-- no pk versions -->
          <a href="{% url 'mini_insta:create_post' %}">Create Post</a>
          <a href="{% url 'mini_insta:profile_search' %}">Search</a>
        {% endif %}
      </div>

      <div class="nav-right">
        {% if request.user.is_authenticated %}
          <form method="post" action="{% url 'logout' %}" style="display:inline">
            {% csrf_token %}
            <button type="submit" class="btn btn-outline">Logout</button>
          </form>
          <span class="muted">Logged in user: {{ request.user.username }}.</span>
        {% else %}
          <!-- (4) Show “Create Profile” link when not logged in -->
          <a class="btn btn-outline" href="{% url 'mini_insta:create_profile' %}">Create Profile</a>
          <a class="btn btn-primary" href="{% url 'login' %}">Login</a>
          <span class="muted">Not logged in.</span>
        {% endif %}
      </div>
    </nav>

    <hr />
    {% block content %}{% endblock %}

  </body>
</html>



