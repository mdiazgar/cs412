{% extends "mini_insta/base.html" %}

{% block title %}Create Post{% endblock %}

{% block content %}
  <h2>Create a new Post for @{{ profile.username }}</h2>

  <form method="post"
        action="{% url 'mini_insta:create_post' profile.pk %}"
        enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.non_field_errors }}

    <div class="form-row">
      <label for="id_caption">Caption</label>
      <textarea id="id_caption"
                name="caption"
                rows="4"
                required
                placeholder="Write a captionâ€¦">{{ form.caption.value|default_if_none:'' }}</textarea>
      {% if form.caption.errors %}
        <div class="field-errors">{{ form.caption.errors }}</div>
      {% endif %}
    </div>

    <div class="form-row">
      <label for="id_files">Select Photos</label>
      <input id="id_files"
             type="file"
             name="files"
             accept="image/*"
             multiple>
    </div>

    <div class="row gap-sm" style="margin-top:1rem">
    <button type="submit" class="btn btn-primary">Create</button>
    <a class="btn btn-outline" href="{% url 'mini_insta:show_profile' pk=profile.pk %}">Cancel</a>
    </div>
  </form>

  <style>
    .form-row { margin: .8rem 0; display: grid; gap: .35rem; }
    .form-row label { font-weight: 600; }
    textarea, input[type="file"] { width: 100%; padding: .55rem; border: 1px solid #ccc; border-radius: 6px; }
    .field-errors { color: #b00020; }
    .hint { color: #666; font-size: .9rem; margin: 0; }
    .btn-link { margin-left: .6rem; }
  </style>
{% endblock %}
