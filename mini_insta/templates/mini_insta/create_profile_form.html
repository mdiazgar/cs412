{% extends "mini_insta/base.html" %}

{% block title %}Create Profile{% endblock %}

{% block content %}
<h1 style="margin-bottom:.25rem;">Create your account</h1>
<p class="muted" style="margin-top:0;">Choose a username & password, then set up your profile.</p>

<form method="post" novalidate>
  {% csrf_token %}

  <!-- Non-field errors (top) -->
  {% if user_form.non_field_errors or form.non_field_errors %}
    <div class="card" style="border-color:#fecaca;background:#fff1f2;color:#7f1d1d;margin:.5rem 0 1rem;">
      <strong>There were some problems:</strong>
      {{ user_form.non_field_errors }}
      {{ form.non_field_errors }}
    </div>
  {% endif %}

  <div class="form-grid">
    <!-- Account -->
    <fieldset class="card">
      <legend style="font-weight:700;">Account</legend>

      <div class="field">
        <label for="{{ user_form.username.id_for_label }}">Username</label>
        {{ user_form.username }}
        <small class="hint">This is your login name (not your profile handle).</small>
        {{ user_form.username.errors }}
      </div>

      <div class="field">
        <label for="{{ user_form.password1.id_for_label }}">Password</label>
        {{ user_form.password1 }}
        {{ user_form.password1.errors }}
      </div>

      <div class="field">
        <label for="{{ user_form.password2.id_for_label }}">Confirm password</label>
        {{ user_form.password2 }}
        {{ user_form.password2.errors }}
      </div>
    </fieldset>

    <!-- Profile -->
    <fieldset class="card">
      <legend style="font-weight:700;">Profile</legend>

      <div class="field">
        <label for="{{ form.username.id_for_label }}">Handle (profile username)</label>
        {{ form.username }}
        <small class="hint">Shown to others, e.g. <code>@yourhandle</code>.</small>
        {{ form.username.errors }}
      </div>

      <div class="field">
        <label for="{{ form.display_name.id_for_label }}">Display name</label>
        {{ form.display_name }}
        {{ form.display_name.errors }}
      </div>

      <div class="field">
        <label for="{{ form.bio_text.id_for_label }}">Bio</label>
        {{ form.bio_text }}
        {{ form.bio_text.errors }}
      </div>

      <div class="field">
        <label for="{{ form.profile_image_url.id_for_label }}">Image URL</label>
        {{ form.profile_image_url }}
        {{ form.profile_image_url.errors }}
      </div>
    </fieldset>
  </div>

  <div class="row" style="margin-top:1rem;">
    <button type="submit" class="btn btn-primary">Create profile</button>
    <a href="{% url 'mini_insta:show_all_profiles' %}" class="btn btn-outline">Cancel</a>
  </div>
</form>

<style>
  /* light, template-local helpers */
  .form-grid {
    display: grid;
    gap: 1rem;
    grid-template-columns: 1fr;
  }
  @media (min-width: 900px) {
    .form-grid { grid-template-columns: 1fr 1fr; }
  }

  .field { display: grid; gap: .35rem; margin-bottom: .8rem; }
  .field input[type="text"],
  .field input[type="url"],
  .field input[type="password"],
  .field textarea {
    width: 100%;
    padding: .55rem .7rem;
    border: 1px solid #e5e7eb;
    border-radius: .5rem;
    font: inherit;
  }
  .field textarea { min-height: 6.5rem; }

  .hint { color:#6b7280; font-size:.875rem; }
  /* Default Django errors come in <ul class="errorlist"> */
  ul.errorlist {
    margin: .25rem 0 0;
    padding-left: 1rem;
    color: #7f1d1d;
  }
</style>
{% endblock %}

