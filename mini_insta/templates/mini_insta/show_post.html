{# templates/mini_insta/show_post.html #}
{% extends "mini_insta/base.html" %}
{% load static %}

{% block title %}Post {{ post.pk }}{% endblock %}

{% block content %}
  <article class="post-detail">
    
    <p class="row gap-sm" style="margin-top:.5rem;">
    <a class="btn btn-outline" href="{% url 'mini_insta:show_profile' pk=post.profile.pk %}">&larr; Back to profile</a>
    </p>

  
 


    <h2>Post #{{ post.pk }}</h2>
    {% if post.published %}<p class="muted">Published: {{ post.published }}</p>{% endif %}
    {% if post.caption %}<p>{{ post.caption }}</p>{% endif %}

    <hr>

    <section class="photo-grid">
      {% with items=photos|default:post.photos.all %}
        {% if items %}
          <div class="grid">
            {% for photo in items %}
              {% if photo.get_image_url %}
                <div class="cell">
                  <img src="{{ photo.get_image_url }}" alt="Photo {{ forloop.counter }} for Post {{ post.pk }}">
                </div>
              {% endif %}
            {% endfor %}
          </div>
        {% else %}
          <p class="muted">No photos yet.</p>
        {% endif %}
      {% endwith %}
    </section>

    <p style="margin-top:1rem;">
    <a class="btn btn-primary"  href="{% url 'mini_insta:delete_post' pk=post.pk %}">Delete Post</a>
    <a class="btn btn-primary" href="{% url 'mini_insta:update_post' pk=post.pk %}">Edit Post</a>
    </p>
  </article>

  <style>
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 12px; }
    .cell img { width: 100%; height: auto; display: block; border-radius: 8px; }
    .muted { color: #666; font-size: 0.95rem; }
  </style>
{% endblock %}

